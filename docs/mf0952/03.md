---
title: Ferramentas de transferencia de arquivos
description: A transferencia segura de arquivos √© esencial na publicaci√≥n web. 
lastUpdated: true
---

# {{ $frontmatter.title }}

A transferencia segura de arquivos √© esencial na publicaci√≥n web. Analizaremos **configuraci√≥ns, conexi√≥ns remotas, operaci√≥ns b√°sicas (subida/actualizaci√≥n/borrado) e publicaci√≥n**, con enfoque en protocolos como **FTP, SFTP, SCP, RSYNC** e ferramentas gr√°ficas (**FileZilla, WinSCP**).

---

## **1. Par√°metros de configuraci√≥n**

### **üîß 1.1. Par√°metros xen√©ricos**

- **Protocolo**: FTP (non seguro), SFTP/SCP (baseados en SSH), RSYNC (sincronizaci√≥n incremental).  
- **Autenticaci√≥n**:  
  - Usuario/contrasinal.  
  - Chaves SSH (m√°is seguro).  
- **Porto**:  
  - FTP: `21` (sen cifrado), `990` (FTPS impl√≠cito).  
  - SFTP/SCP: `22` (SSH).  
- **Modo Pasivo (FTP)**: √ötil para evitar problemas con firewalls. 

Aqu√≠ tes unha extensi√≥n detallada do teu esquema con exemplos pr√°cticos e ton formativo:

---

#### **Protocolos de transferencia de arquivos**

##### **1. Protocolos**

- **FTP (File Transfer Protocol)** ‚Äì **Non seguro** (datos sen cifrar).  
  - *Exemplo pr√°ctico*:  
    ```bash
    ftp servidor.example.com  # Conectarse a un servidor FTP (porto 21).
    ```
    - ‚ö†Ô∏è **Risco**: O contrasinal e os datos viaxan en texto plano (poden ser interceptados).  

- **SFTP (SSH File Transfer Protocol) / SCP (Secure Copy)** ‚Äì **Seguros** (cifrados mediante SSH).  
  - *Exemplo pr√°ctico (SFTP)*:  
    ```bash
    sftp usuario@servidor.example.com  # Conectarse por SFTP (porto 22).
    ```
  - *Exemplo pr√°ctico (SCP)*:  
    ```bash
    scp arquivo_local.txt usuario@servidor.example.com:/ruta/remota  # Copiar un arquivo seguro.
    ```
  - ‚úÖ **Vantaxe**: Todos os datos (inclu√≠ndo credenciais) est√°n cifrados.  

- **RSYNC** ‚Äì **Sincronizaci√≥n eficiente** (s√≥ transfire cambios incrementais).  
  - *Exemplo pr√°ctico*:  
    ```bash
    rsync -avz /carpeta/local/ usuario@servidor.example.com:/carpeta/remota/  # Sincronizar s√≥ diferenzas.
    ```
  - ‚úÖ **Vantaxe**: Ideal para copias de seguridade ou actualizaci√≥ns parciais.  

---

##### **2. Autenticaci√≥n**

- **Usuario/Contrasinal**:  
  - *Exemplo (FTP)*:  
    ```bash
    ftp> open servidor.example.com
    Username: meu_usuario
    Password: ********  # ‚ö†Ô∏è Non seguro en FTP est√°ndar!
    ```
  - *Recomendaci√≥n*: Evitar en FTP; usar SFTP/SCP ou FTPS (FTP + TLS).  

- **Chaves SSH** (m√°is seguro):  
  - *Exemplo*: Xerar e usar unha chave SSH para SFTP/SCP:  
    ```bash
    ssh-keygen -t ed25519  # Xerar chave (almacenada en ~/.ssh/).
    ssh-copy-id usuario@servidor.example.com  # Copiar chave p√∫blica ao servidor.
    ```
  - ‚úÖ **Vantaxe**: Elimina a necesidade de contrasinais e permite autenticaci√≥n automatizada.  

---

##### **3. Portos**

- **FTP**:  
  - `21` (control, sen cifrado).  
  - `990` (FTPS impl√≠cito ‚Äì FTP sobre TLS).  
  - *Exemplo FTPS*:  
    ```bash
    lftp -e "set ftp:ssl-force true" -u usuario,contrasinal servidor.example.com:990
    ```

- **SFTP/SCP**:  
  - `22` (o mesmo que SSH).  

---

##### **4. Modo Pasivo (FTP)**

- **Problema**: En FTP activo, o servidor intenta conectar-se ao cliente (pode bloquearse por firewall).  
- **Soluci√≥n**: Modo pasivo (`PASV`), onde o cliente inicia ambas conexi√≥ns.  
  - *Exemplo*:  
    ```bash
    ftp> passive  # Activar modo pasivo antes de descargar.
    ftp> get arquivo.txt
    ```
  - ‚úÖ **Vantaxe**: Funciona mellor en redes con firewall/NAT.  

---

#### **Resumo de Boas Pr√°cticas**

1. **Evita FTP est√°ndar** para datos sensibles (usa **SFTP/SCP** ou **FTPS**).  
2. **Prefire chaves SSH** en vez de contrasinais.  
3. **Usa RSYNC** para sincronizaci√≥ns grandes ou recorrentes.  
4. **Configura firewalls** para permitir portos espec√≠ficos (22 para SFTP, 990 para FTPS).  

üëâ **Nota formativa**: A seguridade depende do protocolo e da autenticaci√≥n. SFTP/RSYNC + chaves SSH √© a combinaci√≥n m√°is robusta para entornos profesionais.  

### **üñ•Ô∏è 1.2. Par√°metros espec√≠ficos por servidor**

#### **Apache/Nginx (Web Server)**

##### **1. `chroot` (Xaula de Seguridade)**

- **Obxectivo**: Restrinxir usuarios a un directorio espec√≠fico (evita acceso a todo o sistema).  
- **Exemplo pr√°ctico (Apache/Nginx)**:  
  - Se un usuario ten acceso a `/var/www/html/mi_sitio`, non pode navegar a `/etc` ou `/home`.  
  - **Como probalo**:  
    ```bash
    sudo chroot /var/www/html/mi_sitio /bin/bash  # Simula un entorno restrinxido (require configuraci√≥n previa).
    ```
  - ‚ö†Ô∏è **Importante**: Os arquivos dentro do `chroot` deben ter as bibliotecas necesarias (p.ex., `/lib`, `/bin`).  

##### **2. Configuraci√≥n SFTP en OpenSSH**

- **Escenario**: Queres que usuarios do grupo `sftpusers` s√≥ poidan subir/baixar arquivos (sen acceso SSH completo).  
- **Exemplo (editar `/etc/ssh/sshd_config`)**:  
  ```bash
  Subsystem sftp internal-sftp  # Usa o SFTP integrado (sen necesidad de `sftp-server`).
  Match Group sftpusers         # Aplica s√≥ a este grupo.
    ChrootDirectory /var/www    # Directorio ra√≠z restrinxido.
    ForceCommand internal-sftp  # Obliga a usar SFTP (non permite SSH).
    X11Forwarding no            # Desactiva caracter√≠sticas innecesarias.
    AllowTcpForwarding no
  ```
- **Pasos para implementar**:  
  1. Crear grupo e usuario:  
     ```bash
     sudo groupadd sftpusers
     sudo useradd -G sftpusers -s /bin/false usuario1
     sudo passwd usuario1
     ```
  2. Configurar permisos do directorio `chroot`:  
     ```bash
     sudo chown root:root /var/www  # O due√±o DEBE ser root.
     sudo chmod 755 /var/www
     sudo mkdir /var/www/arquivos_usuario1
     sudo chown usuario1:sftpusers /var/www/arquivos_usuario1
     ```
  3. Reiniciar SSH:  
     ```bash
     sudo systemctl restart sshd
     ```
- **Proba de conexi√≥n**:  
  ```bash
  sftp usuario1@servidor.example.com  # O usuario s√≥ ver√° /var/www/arquivos_usuario1.
  ```

---

#### **Servidores Windows (IIS)**

##### **1. FTP sobre SSL (FTPS)**

- **Obxectivo**: Cifrar a transferencia de arquivos en IIS.  
- **Exemplo pr√°ctico**:  
  1. **Obter certificado**:  
     - Usa *IIS Manager* > *Server Certificates* > *Create Self-Signed Certificate* (ou compra un certificado p√∫blico).  
  2. **Configurar FTPS**:  
     - En *FTP Site* > *FTP SSL Settings*, selecciona:  
       - **Require SSL** (para forzar cifrado).  
       - Escolle o certificado creado.  
  3. **Conectarse desde un cliente**:  
     - Usa FileZilla ou `lftp` con:  
       ```bash
       lftp -e "set ftp:ssl-force true" -u usuario ftps://servidor.example.com:990
       ```

##### **2. Permisos NTFS + ACLs**

- **Escenario**: Limitar acceso a unha carpeta para usuarios espec√≠ficos.  
- **Exemplo**:  
  1. **Definir permisos**:  
     - Clica dereito na carpeta > *Properties* > *Security* > *Edit*.  
     - Engade o usuario e asigna permisos (p.ex., *Read & Execute*, *Write*).  
  2. **Combinar con FTP no IIS**:  
     - En *FTP Authorization Rules*, engade regras personalizadas (p.ex., s√≥ permitir escritura a un grupo AD).  
- **Boas pr√°cticas**:  
  - Usa o principio de **m√≠nimo privilexio** (s√≥ permisos necesarios).  
  - **Auditor√≠a**: Activa *Advanced Security* > *Auditing* para rexistrar accesos.  

---

#### **Resumo comparativo**

| **Caracter√≠stica**      | **Linux (Apache/Nginx)**   | **Windows (IIS)**               |
| ----------------------- | -------------------------- | ------------------------------- |
| **Restrinxir usuarios** | `chroot` + SFTP            | Permisos NTFS + ACLs            |
| **Cifrado**             | SFTP/SCP (SSH)             | FTPS (SSL/TLS)                  |
| **Autenticaci√≥n**       | Chaves SSH ou usuario/pass | Usuario/pass + Integraci√≥n AD   |
| **Ferramentas CLI**     | `sftp`, `rsync`, `chmod`   | `icacls` (permisos), PowerShell |

---

#### **Recomendaci√≥ns finais**

- **En Linux**:  
  - Usa **SFTP + `chroot`** para maior seguridade.  
  - **Monitoriza** os logs de SSH (`/var/log/auth.log`).  
- **En Windows**:  
  - **Combina FTPS con ACLs** para control granular.  
  - **Evita FTP plano** (usa sempre SSL/TLS).  

üëâ **Nota formativa**: Aseg√∫rate de probar calquera configuraci√≥n nun ambiente de desenvolvemento antes de implementala en produci√≥n.  

#### Lembra üòä

##### **Apache/Nginx (Web Server)**

- **`chroot`**: Restrinxe usuarios a un directorio espec√≠fico (ex.: `/var/www/html`).  
- **Configuraci√≥n SFTP en OpenSSH**:  
  ```bash
  # /etc/ssh/sshd_config
  Subsystem sftp internal-sftp
  Match Group sftpusers
    ChrootDirectory /var/www
    ForceCommand internal-sftp
    X11Forwarding no
    AllowTcpForwarding no
  ```

##### **Servidores Windows (IIS)**

- **FTP sobre SSL**: Require certificado no IIS Manager.  
- **Permisos NTFS**: Combinar con ACLs para limitar acceso.  

---

## **2. Conexi√≥n con sistemas remotos**  

### **üåê 2.1. Descrici√≥n de sistemas remotos**

- **Servidores Linux/Unix**: Usan **SSH** (SFTP/SCP) ou **FTP/RSYNC**.  
- **Servidores Windows**: Adoitan empregar **FTP/FTPS** ou **SFTP** mediante WinSCP.  

#### **Servidores Linux/Unix**

- **Protocolos principais**:
  - **SSH/SFTP/SCP** (cifrado, seguro).
  - **FTP/RSYNC** (require configuraci√≥n adicional para seguridade).
- **Casos de uso**:
  - **SFTP/SCP**: Transferencia segura de arquivos (p.ex., backups, actualizaci√≥ns de c√≥digo).
  - **RSYNC**: Sincronizaci√≥n eficiente de grandes volumes de datos (p.ex., mirrors de servidores).

#### **Servidores Windows**

- **Protocolos com√∫ns**:
  - **FTP/FTPS** (integrado en IIS, require certificado SSL).
  - **SFTP** mediante software de terceiros (p.ex., WinSCP, Bitvise).
- **Casos de uso**:
  - **FTPS**: Subida de arquivos a servidores web (p.ex., contidos est√°ticos).
  - **WinSCP**: Administraci√≥n gr√°fica de arquivos con soporte para chaves SSH.

### **üîå 2.2. Ordes de conexi√≥n**

#### **üîß Linux (Terminal)**

##### **1. SFTP (Secure File Transfer Protocol)**

- **Conexi√≥n b√°sica**:

  ```bash
  sftp -P 22 usuario@servidor.com  # -P especifica o porto (22 por defecto).
  ```

- **Comandos √∫tiles dentro de SFTP**:

  ```bash
  ls                  # Listar arquivos remotos.
  put arquivo_local   # Subir un arquivo.
  get arquivo_remoto  # Descargar un arquivo.
  cd /ruta/remota     # Navegar no servidor.
  ```

##### **2. SCP (Secure Copy)**

- **Copiar un arquivo local ao remoto**:

  ```bash
  scp -P 22 arquivo_local.txt usuario@servidor.com:/home/usuario/  
  ```

- **Copiar un directorio recursivamente**:

  ```bash
  scp -r /carpeta_local/ usuario@servidor.com:/backups/  
  ```

##### **3. RSYNC (Sincronizaci√≥n Incremental)**

- **Sincronizar un directorio local co remoto**:

  ```bash
  rsync -avz --delete /carpeta_local/ usuario@servidor.com:/backups/  
  ```

  - `-a`: Modo arquivo (conserva permisos).
  - `-v`: Verbose (amosar progreso).
  - `-z`: Comprimir durante a transferencia.
  - `--delete`: Elimina arquivos no destino que xa non existen na orixe.

#### **ü™ü Windows (PowerShell/WinSCP)**

##### **1. PSFTP (PowerShell Remoting)**

- **Conexi√≥n b√°sica**:

  ```bash
  # Require WinRM configurado no servidor destino.
  Enter-PSSession -ComputerName servidor.com -Credential (Get-Credential)
  ```

- **Transferencia de arquivos con `PSDrive`**:

  ```bash
  New-PSDrive -Name "Remoto" -PSProvider FileSystem -Root "\\servidor.com\c$\" -Credential (Get-Credential)
  Copy-Item "C:\local\arquivo.txt" -Destination "Remoto:\backups\"
  ```

##### **2. WinSCP (GUI)**

- **Configuraci√≥n con SFTP e chave SSH**:

  1. Abre WinSCP > `Nova conexi√≥n`.
  2. Selecciona **SFTP** como protocolo.
  3. Introduce:
     - **Host**: `servidor.com`
     - **Porto**: `22`
     - **Usuario**: `tu_usuario`
     - **Chave privada**: Carga o arquivo `.ppk` (convertido desde chave SSH con PuTTYgen).
  4. Garda a sesi√≥n e conecta.

- **Automatizaci√≥n con script (WinSCP CLI)**:

  ```bash
  # Exemplo: Subir un arquivo autom√°ticamente.
  winscp.com /command ^
    "open sftp://usuario:contrasinal@servidor.com/" ^
    "put C:\local\arquivo.txt /remoto/" ^
    "exit"
  ```

------

### **üìå Boas pr√°cticas e seguridade**

#### **Para Linux/Unix**

- **Evita FTP est√°ndar**: Usa sempre **SFTP/SCP** ou **RSYNC + SSH**.

- **Autenticaci√≥n sen contrasinal**: Configura chaves SSH:

  ```bash
  ssh-keygen -t ed25519  # Xerar chave.
  ssh-copy-id usuario@servidor.com  # Copiar chave p√∫blica.
  ```

#### **Para Windows**

- **FTPS > FTP**: En IIS, sempre usa **FTP sobre SSL/TLS**.
- **WinSCP + Chaves SSH**: M√°is seguro que contrasinais en texto plano.

#### **Problemas com√∫ns e soluci√≥ns**

- **¬´Connection refused¬ª en SFTP**:

  - Verifica que o servidor SSH est√° activo: `sudo systemctl status sshd`.

  - Aseg√∫rate de que o firewall permite o porto 22:

    ```bash
    sudo ufw allow 22/tcp  # (Linux).
    ```

- **Erros de permisos en WinSCP**:

  - Comproba que o usuario ten permisos de escritura no directorio remoto.

------

### **üîó Recursos adicionais**

- **Documentaci√≥n oficial**:
  - [OpenSSH SFTP](https://man.openbsd.org/sftp)
  - [WinSCP GUI Guide](https://winscp.net/eng/docs/ui_login)

------

**üí° Nota**:

- **En Linux**, a li√±a de comandos √© t√∫a aliada para automatizar tarefas (p.ex., con `rsync` e `cron`).
- **En Windows**, ferramentas como **WinSCP** ou **PowerShell Remoting** ofrecen flexibilidade para administradores.

##### **Linux (Terminal)**

- **SFTP**:  
  ```bash
  sftp usuario@servidor.com -P 22
  ```
- **SCP**:  
  ```bash
  scp -P 22 arquivo_local.txt usuario@servidor.com:/ruta/remota/
  ```

##### **Windows (PowerShell/WinSCP)**

- **PSFTP (PowerShell)**:  
  
  ```powershell
  Connect-PSSession -HostName servidor.com -UserName usuario
  ```
- **WinSCP (GUI)**: Configurar con SFTP e chave SSH.  

---

## **3. Operaci√≥ns de transferencia de arquivos**

### **üîÑ 3.1. Operaci√≥ns b√°sicas**  
| **Operaci√≥n**         | **Comando SFTP**     | **Comando FTP**      |
| --------------------- | -------------------- | -------------------- |
| **Subir arquivo**     | `put arquivo_local`  | `put arquivo_local`  |
| **Descargar**         | `get arquivo_remoto` | `get arquivo_remoto` |
| **Listar directorio** | `ls`                 | `dir`                |

### **üìÇ 3.2. Maneiras de transferir arquivos**  
1. **Transferencia manual** (FTP/SFTP/SCP).  
2. **Automatizada con scripts** (ex.: `rsync --delete -avz /local/ user@remote:/dest/`).  
3. **Sincronizaci√≥n en tempo real** (ex.: `lsyncd`).  

#### **1. Transferencia manual**

##### **üîπ FTP (Non seguro - S√≥ para redes locais/privadas)**

```bash
ftp servidor.local  # Conectar
> put arquivo.txt   # Subir
> get arquivo.txt   # Descargar
```
**‚ö†Ô∏è Alerta**: Os datos viaxan sen cifrar. **Alternativa segura**: Usa FTPS (FTP + SSL) ou SFTP.

##### **üîπ SFTP (Secure FTP sobre SSH)**

```bash
sftp usuario@servidor.com
sftp> put documento.pdf /remoto/  # Subir
sftp> get /remoto/backup.zip .    # Descargar
```
**‚úÖ Vantaxe**: Todo cifrado (porto 22).

##### **üîπ SCP (Copia segura)**

```bash
# Copiar arquivo local ‚Üí remoto
scp -P 22 backup.tar.gz usuario@servidor.com:/backups/

# Copiar directorio completo (recursivo)
scp -r /local/fotos/ usuario@servidor.com:/galerias/
```

---

#### **2. Transferencia automatizada con *scripts***

##### **üîπ RSYNC (Sincronizaci√≥n incremental)**

```bash
# Sincronizar /local/ co remoto (borra arquivos obsoletos)
rsync --delete -avz -e "ssh -p 22" /local/ usuario@servidor.com:/backups/
```
**üìå Explicaci√≥n flags**:  

- `--delete`: Elimina no destino o que non exista na orixe.  
- `-a`: Modo arquivo (mant√©n permisos, datas).  
- `-v`: Verbose (amosar progreso).  
- `-z`: Compresi√≥n durante a transferencia.  

**üîÑ Exemplo con Cron (Backup diario √°s 2:00 AM)**  
```bash
0 2 * * * rsync -avz /var/www/ admin@backup-server:/backups/diarios/
```

##### **üîπ Curl/Wget (Descarga desde URLs)**

```bash
# Descargar arquivo con autenticaci√≥n b√°sica
curl -u usuario:contrasinal -O http://servidor.com/backup.zip

# Descargar recursivamente (p.ex., sitio web)
wget --mirror --convert-links --user=usuario --password=contrasinal http://web.local
```

---

#### **3. Sincronizaci√≥n en tempo real**

##### **üîπ Lsyncd (Monitoriza cambios e executa rsync)**

**Instalaci√≥n**:  
```bash
sudo apt install lsyncd  # Debian/Ubuntu
```

**Configuraci√≥n b√°sica (`/etc/lsyncd.lua`)**  
```lua
settings {
    logfile = "/var/log/lsyncd.log",
    statusFile = "/var/log/lsyncd-status.log"
}

sync {
    default.rsync,
    source = "/local/fotos/",
    target = "usuario@servidor.com:/backups/fotos/",
    rsync = {
        archive = true,
        compress = true,
        rsh = "ssh -p 22 -i /home/usuario/.ssh/id_rsa"
    }
}
```
**‚ö° Funcionamento**: Lsyncd detecta cambios en `/local/fotos/` e lanza **rsync** automaticamente.

##### **üîπ Syncthing (Alternativa con GUI - P2P)**

- **Perfecto para equipos persoais/servidores pequenos**.  
- **Caracter√≠sticas**:  
  - Cifrado de extremo a extremo.  
  - Multiplataforma (Linux, Windows, Android).  
  - Non require servidor central.  

**üì• Instalaci√≥n en Linux**:  
```bash
sudo apt install syncthing  # Debian/Ubuntu
systemctl start syncthing@usuario.service
```
**üåê Accede √° GUI**: `http://localhost:8384` (configura dispositivos emparellados).

---

#### **üìå Comparativa r√°pida**

| **M√©todo**       | **Caso de Uso**                      | **Seguridade**   | **Complexidade** |
| ---------------- | ------------------------------------ | ---------------- | ---------------- |
| **FTP**          | Transferencia r√°pida en redes locais | ‚ùå Sen cifrado    | Baixa            |
| **SFTP/SCP**     | Transferencia segura ad-hoc          | ‚úÖ Cifrado (SSH)  | Media            |
| **RSYNC + Cron** | Backups programados                  | ‚úÖ Depende de SSH | Alta (scripts)   |
| **Lsyncd**       | Sincronizaci√≥n continua              | ‚úÖ Cifrado (SSH)  | Alta (config)    |
| **Syncthing**    | Sincronizaci√≥n P2P sinxela           | ‚úÖ Cifrado E2E    | Baixa (GUI)      |

---

#### **üí° Consellos pr√°cticos**

1. **Evita FTP est√°ndar** en redes p√∫blicas.  
2. **Automatiza con RSYNC** para backups recorrentes (usa `--delete` con precauci√≥n).  
3. **Proba Lsyncd** se necesitas replicaci√≥n en tempo real (p.ex., clusters web).  
4. **Syncthing** √© ideal para usuarios non t√©cnicos ou equipos pequenos.  

**üîß Debugging com√∫n**:  
- **Erros de permisos en SFTP/RSYNC**:  
  ```bash
  chmod 700 ~/.ssh && chmod 600 ~/.ssh/id_rsa  # Aseg√∫rate de que as chaves SSH te√±en permisos correctos.
  ```
- **Lsyncd non sincroniza**: Verifica `/var/log/lsyncd.log` e comproba que o SSH funciona sen contrasinal.  

### **‚è≥ 3.3. Fases da transferencia**

1. **Conexi√≥n** (autenticaci√≥n).  
2. **Selecci√≥n de arquivos** (local ‚Üí remoto ou viceversa).  
3. **Verificaci√≥n** (tama√±o, checksum opcional).  
4. **Finalizaci√≥n** (peche seguro da conexi√≥n).  
5. Aqu√≠ tes a extensi√≥n completa do teu esquema cun enfoque pr√°ctico e did√°ctico, inclu√≠ndo exemplos detallados para cada fase:

   #### **1. Conexi√≥n (Autenticaci√≥n)**

   **Obxectivo**: Establecer unha canle segura entre cliente e servidor.  

   ##### **Exemplos pr√°cticos**

   - **SFTP/SSH (Autenticaci√≥n con chave p√∫blica)**:  
     ```bash
     ssh-keygen -t ed25519  # Xerar chave (gardar en ~/.ssh/id_ed25519)
     ssh-copy-id usuario@servidor.com  # Copiar chave p√∫blica ao servidor
     sftp -i ~/.ssh/id_ed25519 usuario@servidor.com  # Conectar con chave
     ```
     **‚úÖ Ventaxa**: M√°is seguro que contrasinais.  

   - **FTP (Autenticaci√≥n b√°sica)**:  
     ```bash
     ftp servidor.com
     Connected to servidor.com.
     220 FTP Server ready.
     Name: usuario
     331 Password required for usuario.
     Password: ********
     230 User logged in.
     ```
     **‚ö†Ô∏è Alerta**: O contrasinal viaxa en texto plano. Usa **FTPS** (FTP + SSL) se √© imprescindible.  

   ---

   #### **2. Selecci√≥n de arquivos**

   **Obxectivo**: Escoller os arquivos/directorios para transferir e direcci√≥n (local ‚Üí remoto ou remoto ‚Üí local).  

   ##### **Exemplos pr√°cticos**

   - **SFTP (Subida/Descarga interactiva)**:  
     ```bash
     sftp usuario@servidor.com
     sftp> lls  # Listar arquivos LOCAIS
     sftp> ls   # Listar arquivos REMOTOS
     sftp> put /local/documento.pdf /remoto/backups/  # Subir
     sftp> get /remoto/db.sqlite3 ~/backups/  # Descargar
     ```

   - **RSYNC (Selecci√≥n avanzada con patr√≥ns)**:  
     ```bash
     rsync -avz --include='*.jpg' --exclude='*' /local/fotos/ usuario@servidor.com:/backups/
     ```
     **üìå Explicaci√≥n**: Sincroniza s√≥ arquivos `.jpg` e ignora o resto.  

   ---

   #### **3. Verificaci√≥n**

   **Obxectivo**: Asegurar que os arquivos transferidos son √≠ntegros e completos.  

   ##### **M√©todos Com√∫ns**

   - **Comparaci√≥n de tama√±os**:  
     ```bash
     # Local:
     ls -lh arquivo.txt
     # Remoto (tras SFTP/SCP):
     sftp usuario@servidor.com
     sftp> ls -lh arquivo.txt
     ```

   - **Checksum (SHA256/MD5)**:  
     ```bash
     # Xenerar checksum local:
     sha256sum arquivo.txt > checksum_local.txt
     
     # Verificar no remoto (tras transferir):
     ssh usuario@servidor.com "sha256sum /remoto/arquivo.txt" > checksum_remoto.txt
     diff checksum_local.txt checksum_remoto.txt  # Debe devolver baleiro se son iguais
     ```

   - **RSYNC con verificaci√≥n impl√≠cita**:  
     ```bash
     rsync -avc /local/ usuario@servidor.com:/remoto/  # -c usa checksum en vez de tama√±o/data
     ```

   ---

   #### **4. Finalizaci√≥n**

   **Obxectivo**: Pechar a conexi√≥n de forma segura e rexistrar o resultado.  

   ##### **Exemplos pr√°cticos**

   - **SFTP/SCP**:  
     ```bash
     sftp> exit  # Pechar conexi√≥n
     Connection closed.
     ```

   - **FTP**:  
     ```bash
     ftp> bye
     221 Goodbye.
     ```

   - **Rexistrar transferencias (para auditor√≠a)**:  
     ```bash
     # Engadir a un log tras cada transferencia:
     echo "$(date) - Transferido arquivo.txt a servidor.com" >> /var/log/transferencias.log
     ```

   ---

   #### **üìå Fluxo de traballo recomendado**

   1. **Establece conexi√≥n segura** (SFTP/SCP/RSYNC sobre SSH).  
   2. **Usa filtros** para seleccionar s√≥ os arquivos necesarios (p.ex., `--include`/`--exclude` en RSYNC).  
   3. **Verifica integridade** con checksums (especialmente para backups cr√≠ticos).  
   4. **Rexistra** as transferencias e revisa logs periodicamente.  

   ---

   #### **üîß Soluci√≥n de problemas com√∫ns**

   - **Erros de autenticaci√≥n**:  
     ```bash
     ssh -v usuario@servidor.com  # Modo verbose para depurar
     ```
   - **Arquivos incompletos**:  
     ```bash
     rsync --partial --progress /local/ usuario@servidor.com:/remoto/  # Contin√∫a transferencias interrompidas
     ```
   - **Checksums non coincidentes**:  
     - Verifica redes lentas ou corrupci√≥n de arquivos.  
     - Usa `rsync -c` para forzar verificaci√≥n por contido.  

   ---

   #### **üåê Caso pr√°ctico**

   **Escenario**: Backup diario dunha base de datos MySQL a un servidor remoto.  
   ```bash
   # 1. Exportar BD local
   mysqldump -u root -p base_de_datos > /backups/db_$(date +%F).sql
   
   # 2. Transferir con verificaci√≥n
   rsync -avz --checksum /backups/ usuario@backup-server:/backups_mysql/
   
   # 3. Verificar checksum remoto
   ssh usuario@backup-server "sha256sum /backups_mysql/db_$(date +%F).sql" | sha256sum -c
   
   # 4. Rexistrar resultado
   echo "$(date) - Backup de BD completado" >> /var/log/backups.log
   ```

   ---

   **üí° Consello final**: Automatiza estas fases con **scripts + Cron** para aforrar tempo e minimizar erros.  

---

## **4. Actualizaci√≥n e eliminaci√≥n de arquivos**

### **üîÑ 4.1. Actualizaci√≥n de arquivos**  
- **Comandos**:  
  - SFTP: `reput` (sobrescribe).  
  - RSYNC: `rsync -avz --update /local/ user@remote:/dest/` (s√≥ transfire cambios).  
- **Fases**:  
  1. Comparar versi√≥ns locais e remotas.  
  2. Subir s√≥ os arquivos modificados.  

##### **üìå Comandos clave**

| **Protocolo** | **Comando**                                      | **Comportamento**                           |
| ------------- | ------------------------------------------------ | ------------------------------------------- |
| **SFTP**      | `reput arquivo.txt`                              | Sobrescribe o arquivo remoto se existe.     |
| **RSYNC**     | `rsync -avz --update /local/ user@remote:/dest/` | S√≥ transfire arquivos novos ou modificados. |

---

#### **üîç Fases detalladas con exemplos**

##### **1Ô∏è‚É£ Comparar versi√≥ns locais e remotas**

**Obxectivo**: Identificar qu√© arquivos necesitan actualizaci√≥n.  

###### **üìÇ M√©todo manual (SFTP/SSH)**

```bash
# Listar arquivos remotos con datas:
sftp user@servidor.com
sftp> ls -l /remoto/

# Comparar con locais (terminal local):
ls -l /local/
```

###### **‚ö° M√©todo automatizado (RSYNC + Dry Run)**

```bash
rsync -avzn --delete /local/ user@servidor.com:/remoto/
```
**üìå Explicaci√≥n**:  
- `-n` (dry run): Amosa cambios sen transferir.  
- `--delete`: Sinala arquivos remotos que non existen localmente.  

**üìù Sa√≠da de exemplo**:  
```
sent 1.2K bytes  received 136 bytes  2.6K bytes/sec  
deleting /remoto/obsoleto.txt  
./novo_documento.pdf  
```

---

##### **2Ô∏è‚É£ Subir s√≥ arquivos modificados**

###### **üì§ Con SFTP (Actualizaci√≥n manual)**

```bash
sftp user@servidor.com
sftp> reput /local/informe.pdf /remoto/  # Sobrescribe se √© m√°is recente
sftp> mkdir /remoto/backups/            # Crear directorio se non existe
```

###### **ü§ñ Con RSYNC (Actualizaci√≥n automatizada)**

```bash
rsync -avzu --progress /local/ user@servidor.com:/remoto/
```
**üîß Flags clave**:  
- `-u` (update): Ignora arquivos remotos m√°is recentes.  
- `--progress`: Amosa o progreso da transferencia.  

**‚úèÔ∏è Exemplo real**:  
```bash
$ rsync -avzu /fotos/ user@servidor.com:/backups_fotos/  
sending incremental file list  
fotos/vacacions.jpg  
          2.5MB 100%  2.1MB/s   0:00:01  
```

---

#### **üéØ Casos de uso**

##### **üîÑ Sincronizaci√≥n diaria dun proxecto web**

```bash
#!/bin/bash  
# Script: /usr/local/bin/actualizar_web.sh  
rsync -avzu --delete \  
  --exclude='.git/' \  
  /var/www/mi_sitio/ deploy@servidor-web:/var/www/producion/  
```
**‚öôÔ∏è Programar con Cron**:  

```bash
0 3 * * * /usr/local/bin/actualizar_web.sh >> /var/log/web_updates.log
```

##### **üì¶ Backup incremental de bases de dDatos**

```bash
# Exportar MySQL e enviar s√≥ cambios:  
mysqldump -u root -p bd_producion > /backups/bd_$(date +%F).sql  
rsync -avzu /backups/ backup-user@nas:/backups_mysql/  
```

---

#### **üîê Boas pr√°cticas**

1. **Verificaci√≥n Post-Transferencia**:  
   
   ```bash
   # Comparar checksums MD5:  
   ssh user@servidor.com "md5sum /remoto/arquivo.txt" | md5sum -c  
   ```
2. **Xesti√≥n de erros**:  
   ```bash
   rsync -avzu /local/ user@servidor.com:/remoto/ || \  
   echo "Erro RSYNC o $(date)" >> /var/log/erros_transferencia.log  
   ```
3. **Limitaci√≥n de ancho de banda**:  
   ```bash
   rsync --bwlimit=1000 -avz /local/ user@servidor.com:/remoto/  # 1MB/s  
   ```

---

#### **üìö Resumo visual**

```mermaid
flowchart LR  
    A[Comparar\nls -l / sha256sum] --> B{Arquivo\nmodificado?}  
    B -->|Si| C[Subir con rsync/sftp]  
    B -->|Non| D[Ignorar]  
    C --> E[Verificar checksum]  
```

**üí° Consello**: Usa `lsyncd` para sincronizaci√≥n en tempo real en entornos cr√≠ticos.  

üòä

### **üóëÔ∏è 4.2. Eliminaci√≥n de arquivos**

- **Comandos**:  
  - SFTP: `rm arquivo_remoto`.  
  - FTP: `delete arquivo_remoto`.  
  - RSYNC: `rsync --delete` (sincroniza borrados).  
- **Precauci√≥ns**:  
  - Usar `--dry-run` en `rsync` para simular borrados.  
  - Evitar `rm -rf /` en sistemas Linux.  

#### **üìå Comandos para eliminaci√≥n**

##### **1. SFTP (Secure File Transfer Protocol)**

```bash
sftp usuario@servidor.com
sftp> rm documento_obsoleto.pdf  # Elimina un arquivo
sftp> rm -r /carpeta_antiga/     # Elimina un directorio recursivamente (coidado!)
```

##### **2. FTP (File Transfer Protocol)**

```bash
ftp servidor.com
ftp> delete informe_temp.txt      # Borra un arquivo
ftp> rmdir backups_vellos        # Elimina directorio baleiro
```

##### **3. RSYNC (Sincronizaci√≥n con borrado)**

```bash
# Sincroniza e elimina no destino o que non exista na orixe
rsync -avz --delete /local/ user@servidor.com:/backups/

# Simulaci√≥n primeiro (dry run)
rsync -avzn --delete /local/ user@servidor.com:/backups/
```

#### **‚ö†Ô∏è Precauci√≥ns esenciais**

1. **Sempre verificar antes de borrar**:
   
   ```bash
   # Listar contido antes de eliminar
   sftp> ls /remoto/
   ftp> ls
   ```
   
2. **Usar --dry-run en RSYNC**:
   ```bash
   rsync -avzn --delete /local/ user@servidor.com:/backups/
   ```
   - Mostrar√° que se borrar√≠a **sen executalo realmente**

3. **Evitar comandos perigosos**:
   ```bash
   # ‚ò†Ô∏è NUNCA executar:
   rm -rf /              # Borrar√≠a TODO o sistema
   sftp> rm /*           # Pode eliminar ra√≠z do servidor
   ```

#### **üîç Exemplo pr√°ctico completo**

**Escenario**: Queres limpar arquivos temporais dun servidor mantendo unha copia local.

```bash
# 1. Conectar e verificar
sftp admin@servidor.com
sftp> ls -lh /tmp/

# 2. Eliminar selectivamente
sftp> rm /tmp/cache_*.tmp

# 3. Sincronizar borrados con RSYNC (seguro)
rsync -avz --dry-run --delete ~/backups/ admin@servidor.com:/backups/
# Revisar sa√≠da e executar sen -n se est√° correcto
```

#### **üìä T√°boa de boas pr√°cticas**

| **Operaci√≥n**        | **Comando seguro**         | **Comando perigoso**       |
| -------------------- | -------------------------- | -------------------------- |
| Eliminar arquivo     | `sftp> rm arquivo`         | `rm -f /ruta/*`            |
| Eliminar directorio  | `sftp> rm -r /carpeta/`    | `rm -rf /`                 |
| Sincronizar borrados | `rsync --delete --dry-run` | `rsync --delete` (sen ver) |

#### **üí° Consellos adicionais**

1. **Backup antes de borrar**:
   
   ```bash
   scp -r user@servidor.com:/datos/ ~/backup_antes_de_borrar/
   ```
   
2. **Usar aliases seguros**:
   ```bash
   alias rm="rm -i"  # Pide confirmaci√≥n para cada borrado
   ```

3. **Monitorizar espazo**:
   ```bash
   df -h              # Ver espazo antes/despois
   ```

**üìå Nota final**: A eliminaci√≥n remota √© irreversible. Sempre dobres verificaci√≥ns e usa ferramentas como `trash-cli` para mover a papeleira en vez de borrar directamente.

---

## **5. Publicaci√≥n de p√°xinas web**

### **üöÄ 5.1. Fluxo t√≠pico**  
1. **Desenvolvemento local** (Git, edici√≥n de arquivos).  
2. **Transferencia ao servidor**:  
   - SFTP/SCP para arquivos est√°ticos.  
   - RSYNC para proxectos grandes (ex.: WordPress).  
3. **Post-publicaci√≥n**:  
   - Validar permisos (`chmod -R 755 /var/www`).  
   - Probar HTTPS e funcionalidades (formularios, BD).  

### **üîç 5.2. Ferramentas recomendadas**  
- **FileZilla** (FTP/SFTP gr√°fico).  
- **WinSCP** (Windows + SSH).  
- **RSYNC + Cron** (actualizaci√≥ns automatizadas).  

---

## **6. Resumo de seguridade**

| **Aspecto**        | **Recomendaci√≥n**                            |
| ------------------ | -------------------------------------------- |
| **Protocolo**      | Usa **SFTP/SCP** (evita FTP sen cifrar).     |
| **Autenticaci√≥n**  | Chaves SSH en vez de contrasinais.           |
| **Permisos**       | `755` para directorios, `644` para arquivos. |
| **Monitorizaci√≥n** | Rexistros de acceso (`/var/log/sftp.log`).   |

#### **üõ†Ô∏è Ferramentas recomendadas para transferencia de arquivos**

##### **1. FileZilla (Cliente FTP/SFTP Gr√°fico)**

**Casos de uso**: Ideal para usuarios que prefiren interface gr√°fica e transferencias manuais.

**üì• Instalaci√≥n**:
```bash
# Ubuntu/Debian
sudo apt install filezilla

# Windows
# Descargar desde https://filezilla-project.org/
```

**‚öôÔ∏è Configuraci√≥n b√°sica SFTP**:
1. Abrir FileZilla > Xestor de Sitios (Ctrl+S)
2. Novo sitio:
   - Protocolo: **SFTP - SSH File Transfer Protocol**
   - Servidor: `tudominio.com`
   - Porto: `22`
   - Tipo de acceso: **Normal**
   - Usuario/Contrasinal (ou chave SSH)

**‚úÖ Vantaxes**:
- Soporte para arrastrar e soltar
- Comparaci√≥n de directorios
- Fila de transferencias

**‚ö†Ô∏è Precauci√≥ns**:
- Evitar usar FTP b√°sico (non seguro)
- Gardar contrasinais s√≥ en contas persoais

**üñºÔ∏è Exemplo visual**:
```
[Interface FileZilla]
Painel esquerdo (local) ‚Üí Painel dereito (remoto)
Arrastrar arquivos entre paneles para transferir
```

##### **2. WinSCP (Windows + SSH)**

**Casos de uso**: Usuarios Windows que necesitan integraci√≥n con SSH.

**üì• Instalaci√≥n**:
```powershell
# Via Chocolatey (administrador de paquetes Windows)
choco install winscp
```

**üîë Configuraci√≥n con chave SSH**:
1. Converter chave OpenSSH a formato .ppk con PuTTYgen
2. En WinSCP:
   - Novo sitio > Protocolo SFTP
   - Engadir chave privada (.ppk) en Advanced > SSH > Authentication

**‚úèÔ∏è Exemplo de script automatizado**:
```powershell
# Transferir arquivo via WinSCP CLI
winscp.com /command `
  "open sftp://usuario:contrasinal@servidor.com/" `
  "put C:\local\arquivo.txt /remoto/" `
  "exit"
```

**üîß Integraci√≥n avanzada**:
- Edici√≥n remota directa de arquivos
- Sincronizaci√≥n de directorios
- Soporte para comandos SSH personalizados

##### **3. RSYNC + Cron (Actualizaci√≥ns automatizadas)**

**Casos de uso**: Sincronizaci√≥n peri√≥dica de backups ou sitios web.

**üì¶ Configuraci√≥n b√°sica**:
```bash
# Sincronizar directorio local con remoto
rsync -avz --delete \
  -e "ssh -p 22 -i ~/.ssh/id_rsa" \
  /local/path/ \
  usuario@servidor.com:/remote/path/
```

**‚è∞ Programaci√≥n con Cron**:
```bash
# Editar crontab
crontab -e

# Executar cada d√≠a √°s 2:00 AM
0 2 * * * /usr/bin/rsync -avz /backups/ user@backupserver:/backups/
```

**üõ°Ô∏è Boas pr√°cticas**:
1. Usar `--dry-run` primeiro para probar
2. Implementar notificaci√≥ns por correo:
   ```bash
   0 3 * * * rsync -avz /dados/ user@servidor:/backups/ || mail -s "Erro RSYNC" admin@dominio.com
   ```

**üìä Exemplo completo para WordPress**:

```bash
#!/bin/bash
# backup-wordpress.sh

# 1. Facer dump da BD
mysqldump -u root -p"$DB_PASSWORD" wordpress > /backups/wordpress_$(date +%F).sql

# 2. Sincronizar arquivos
rsync -avz --delete \
  --exclude={'wp-config.php','.htaccess'} \
  /var/www/html/ \
  user@backup-server:/backups/wordpress/

# 3. Notificaci√≥n
echo "Backup completado o $(date)" | mail -s "Backup WordPress" admin@dominio.com
```

##### **üîç Comparativa de ferramentas**

| **Caracter√≠stica**    | **FileZilla**          | **WinSCP**       | **RSYNC**                   |
| --------------------- | ---------------------- | ---------------- | --------------------------- |
| **Interface**         | Gr√°fica                | Gr√°fica          | Li√±a de comandos            |
| **Sistema Operativo** | Multiplataforma        | Windows          | Linux/Unix                  |
| **Automatizaci√≥n**    | Limitada               | Scripts b√°sicos  | Alta (integraci√≥n con Cron) |
| **Seguridade**        | SFTP/FTPS              | SFTP/SCP         | SSH                         |
| **Mellor para**       | Transferencias manuais | Usuarios Windows | Sincronizaci√≥n automatizada |

##### **üí° Consellos avanzados**

1. **Monitorizaci√≥n de transferencias**:
   ```bash
   # Verificar se RSYNC est√° en execuci√≥n
   pgrep -l rsync
   
   # Verificar velocidade de transferencia
   iostat -x 1
   ```

2. **Limitaci√≥n de ancho de banda**:
   ```bash
   rsync --bwlimit=1000 -avz /dados/ user@servidor:/backups/  # 1MB/s
   ```

3. **Soluci√≥n de problemas en FileZilla**:
   - Erro "Connection timed out": Verificar firewall e portos
   - Erro "Permission denied": Axustar permisos no servidor (chmod 755)

**üìå Nota Final**: Para entornos profesionais, considere usar soluci√≥ns como **Ansible** para xesti√≥n de arquivos a escala ou **Git** para control de versi√≥ns en vez de transferencias manuais.

---

## **7. Conclusi√≥n**

A transferencia segura de arquivos require:  
1. **Protocolos cifrados** (SFTP/SCP/RSYNC).  
2. **Xesti√≥n adecuada de permisos** (evitar `777`).  
3. **Automatizaci√≥n** (scripts con `rsync` ou `cron`).  
4. **Validaci√≥n post-transferencia** (checksums, probas de funcionamento).  

üîß **Exemplo pr√°ctico**:  
```bash
# Publicar un sitio web con RSYNC (Linux)
rsync -avz --delete --exclude=".git/" ~/meu_sitio/ usuario@servidor.com:/var/www/html/
```

üõ†Ô∏è