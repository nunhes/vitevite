# **Probas de funcionalidade e optimizaci√≥n de p√°xinas web**

## **üîç Probas de funcionalidade**

### **1. Tipos de probas funcionais**
| **Tipo**                  | **Descrici√≥n**                                                           | **Ferramentas**          |
| ------------------------- | ------------------------------------------------------------------------ | ------------------------ |
| **Smoke Testing**         | Verificaci√≥n b√°sica de funcionalidades cr√≠ticas                          | Selenium, Cypress        |
| **Regression Testing**    | Comprobar que novas actualizaci√≥ns non rompan funcionalidades existentes | Jest, Mocha              |
| **Cross-Browser Testing** | Compatibilidade entre navegadores                                        | BrowserStack, LambdaTest |
| **Mobile Testing**        | Funcionalidade en dispositivos m√≥biles                                   | Appium, Xamarin.UITest   |

### **2. Exemplo pr√°ctico con Cypress**
```javascript
// teste2e/login.spec.js
describe('Fluxo de Autenticaci√≥n', () => {
  it('Deber√≠a permitir o acceso con credenciais v√°lidas', () => {
    cy.visit('/login')
    cy.get('#email').type('usuario@exemplo.com')
    cy.get('#password').type('contrasinal123')
    cy.get('button[type="submit"]').click()
    cy.url().should('include', '/dashboard')
    cy.get('.welcome-message').should('contain', 'Benvido')
  })
})
```

### **3. Probas de API con Supertest**
```javascript
const request = require('supertest')
const app = require('../app')

describe('API de Usuarios', () => {
  it('GET /users deber√≠a retornar 200', async () => {
    const res = await request(app).get('/users')
    expect(res.statusCode).toEqual(200)
    expect(res.body).toHaveProperty('users')
  })
})
```

## **‚ö° Optimizaci√≥n de p√°xinas web**

### **1. √Åreas cr√≠ticas de optimizaci√≥n**
| **√Årea**                | **M√©trica Clave** | **Ferramentas**         |
| ----------------------- | ----------------- | ----------------------- |
| **Rendemento Frontend** | LCP, FID, CLS     | Lighthouse, WebPageTest |
| **Carga de imaxes**     | Tama√±o e formato  | Sharp, ImageOptim       |
| **Eficiencia JS/CSS**   | Tama√±o do bundle  | Webpack Bundle Analyzer |
| **Cache e CDN**         | Tempo de entrega  | Cloudflare, Akamai      |

### **2. T√©cnicas avanzadas de optimizaci√≥n**
**Exemplo de configuraci√≥n Webpack para JS optimizado:**
```javascript
// webpack.config.js
module.exports = {
  optimization: {
    splitChunks: {
      chunks: 'all',
      minSize: 30000,
      maxSize: 244000,
    },
    minimize: true,
    minimizer: [new TerserPlugin()],
  },
  performance: {
    hints: 'warning',
    maxAssetSize: 244000,
    maxEntrypointSize: 244000,
  }
}
```

**Optimizaci√≥n de imaxes con React:**
```javascript
import React from 'react'
import { LazyLoadImage } from 'react-lazy-load-image-component'

const OptimizedImage = ({ src, alt }) => (
  <LazyLoadImage
    src={src}
    alt={alt}
    effect="blur"
    placeholderSrc="/placeholder.jpg"
    width="100%"
    height="auto"
  />
)
```

### **3. Monitorizaci√≥n continua**
**Script de monitorizaci√≥n con Lighthouse CI:**
```yaml
# .github/workflows/lighthouse.yml
name: Lighthouse CI
on: [push]
jobs:
  lighthouse:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - run: npm install
      - run: npm run build
      - uses: treosh/lighthouse-ci-action@v7
        with:
          urls: |
            https://tusitio.com/
            https://tusitio.com/blog
          budgetPath: ./lighthouse-budget.json
```

**Exemplo de lighthouse-budget.json:**
```json
{
  "performance": {
    "first-contentful-paint": "<=1.5s",
    "interactive": "<=3s",
    "speed-index": "<=3s"
  },
  "seo": {
    "score": ">=0.9"
  }
}
```

## **üìä T√°boa comparativa: antes e despois da optimizaci√≥n**

| **M√©trica**            | **Antes** | **Despois** | **Mellor√≠a** |
| ---------------------- | --------- | ----------- | ------------ |
| Tama√±o total da p√°xina | 4.2MB     | 1.8MB       | 57% ‚Üì        |
| Tempo de carga (3G)    | 8.4s      | 2.9s        | 65% ‚Üì        |
| Puntuaci√≥n Lighthouse  | 52        | 89          | 71% ‚Üë        |
| Solicitudes HTTP       | 124       | 38          | 69% ‚Üì        |

## **üîß Fluxo de traballo recomendado**

1. **An√°lise inicial**  
   - Executar Lighthouse e WebPageTest
   - Identificar coellos de botella

2. **Implementaci√≥n de melloras**  
   - Optimizaci√≥n de assets
   - Implementar lazy loading
   - Configurar cache adecuado

3. **Validaci√≥n**  
   - Probas A/B
   - Monitorizaci√≥n de m√©tricas reais (RUM)

4. **Manutenci√≥n**  
   - Auditor√≠as mensuais
   - Actualizaci√≥ns continuas

## **üí° Consellos avanzados**

1. **Priorizaci√≥n de recursos**:
```html
<link rel="preload" href="font.woff2" as="font" type="font/woff2" crossorigin>
```

2. **Service Workers para cache avanzado**:
```javascript
// sw.js
self.addEventListener('install', (event) => {
  event.waitUntil(
    caches.open('v1').then((cache) => {
      return cache.addAll([
        '/',
        '/styles/main.css',
        '/scripts/app.js'
      ])
    })
  )
})
```

3. **Adaptative Loading** (para dispositivos lentos):
```javascript
if (navigator.connection.effectiveType === '4g') {
  import('./modules/heavy-module.js')
}
```
