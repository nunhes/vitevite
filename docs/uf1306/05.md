---
title: Xestión de formularios no lado do cliente con JavaScript
description: Os formularios HTML son compoñentes esenciais da maioría dos sitios web e aplicacións web.
lastUpdated: true
---

# {{ $frontmatter.title }}

Os formularios HTML son compoñentes esenciais da maioría dos sitios web e aplicacións web. Permiten a interacción entre os usuarios e eses sitios web e son un concepto clave que os desenvolvedores web deben comprender.

Esta guía completa abrangue varios aspectos dos formularios HTML, desde como crear e estruturar formularios ata a interacción con JavaScript e a validación de formularios.

Comprender como traballar con formularios mediante programación permíteche validar e capturar a entrada do usuario, xestionar os envíos e mellorar a experiencia xeral do usuario.

Ao seguir os exemplos e as prácticas recomendadas que se proporcionan nesta guía, adquirirás os coñecementos necesarios para crear formularios web robustos que melloren a experiencia do usuario e faciliten a recollida e o envío de datos sen problemas.

Tanto se es principiante como se es un desenvolvedor experimentado, esta guía serve como un recurso valioso para comprender e implementar formularios HTML de forma eficaz nos teus proxectos web.

> ***Requisitos previos:***
>
> *Recoméndase ter coñecementos básicos dos fundamentos de JavaScript - variables, tipos de datos, funcións, bucles e técnicas básicas de manipulación de DOM- para comprender plenamente os conceptos tratados neste tutorial. Estes coñecementos básicos facilitarán unha experiencia de aprendizaxe máis fluída a medida que exploramos temas máis avanzados relacionados coa xestión de formularios en JavaScript. Obviamente a familiaridade cos formularios HTML tamén será beneficiosa para comprender e aplicar o material tratado.*
>
> *Nota inicial: Para a súa comodidade, pode acceder a todos os exemplos e códigos que se comentan aquí en [GitHub](https://github.com/theSamyak/FCC-Blog-CodeArchive/tree/main/Client-Side Form Handling with JavaScript) .*



Antes de comezar, hai algo que ter en conta:

Esta é unha entrada no blog de seguimento deste [Manual de DOM e eventos](https://www.freecodecamp.org/news/javascript-in-the-browser-dom-and-events/) e non aborda a comunicación do lado do servidor nin a xestión de formularios do lado do servidor, xa que inclúe temas avanzados como AJAX (JavaScript e XML asíncronos), promesas, xestión de erros e xestión de operacións asíncronas en JavaScript.

Neste tutorial, centrarémonos en como traballar con varios elementos de formulario, incluíndo botóns de opción, caixas de verificación e elementos de selección, así como en como xeralos dinamicamente e interactuar con eles mediante JavaScript.

Afondar na comunicación do lado do servidor iría máis alá do alcance deste artigo, que ten como obxectivo proporcionar unha comprensión completa da manipulación do DOM e o manexo de eventos no contexto dos elementos de formulario.

## Comprensión dos formularios HTML

Os formularios HTML son elementos fundamentais que se empregan para recompilar e enviar datos de usuarios na web. Permiten a interacción entre usuarios e sitios web ao permitirlles introducir información, facer seleccións e enviar datos aos servidores para o seu procesamento.

#### Introdución aos elementos de formulario HTML

Os formularios HTML créanse usando o elemento `<form>`, que actúa como un contedor para varios elementos de entrada. Os elementos comúns dos formularios inclúen campos de texto, caixas de verificación, botóns de opción, menús despregables e botóns.

Para facer referencia a un formulario en JS, podes usar métodos DOM como `getElementById()` ou `document.forms`. 

`document.forms`devolve unha colección de formularios e podes acceder a un formulario específico usando un índice, nome ou identificador.

```javascript
const form = document.getElementById('signup');
const firstForm = document.forms[0]; // accedendo ao primeiro formulario
const formByName = document.forms['formName']; // accedendo ao formulario polo nome
const formById = document.forms['formId']; // accessing ao formulario polo id
```

Vexamos un exemplo básico dun formulario HTML:

```html
<form>
  <label for="username">Username:</label>
  <input type="text" id="username" name="username"><br>

  <label for="password">Password:</label>
  <input type="password" id="password" name="password"><br>

  <input type="submit" value="Submit">
</form>
```

Neste exemplo, temos un formulario con dous campos de entrada: nome de usuario e contrasinal, xunto cun botón de enviar.

### Estrutura e atributos do formulario

Os formularios HTML poden ter varios **atributos** que controlan o seu comportamento e aparencia. Algúns atributos comúns inclúen:

- **acción - [action](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form#action):** Especifica o URL onde se deben enviar os datos do formulario.
- **método - [method](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form#method):** Especifica o método HTTP empregado para enviar datos de formulario ( `post`ou `get`).
- **obxectivo - [target](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form#target)** : Especifica onde mostrar a resposta despois do envío do formulario (por exemplo, `_self`, `_blank`, `_parent`, `_top`).
- **nome - [name](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/form#name)** : Asigna un nome ao formulario para fins de identificación.

Aquí tes un exemplo dun formulario con atributos de acción, método, nome e obxectivo:

```html
<form action="/submit-form" method="POST" name="myForm" target="_blank">
  <!-- Form elements go here -->
</form>
```

### JavaScript para manexo de formularios

JavaScript usa o obxecto `HTMLFormElement` para representar un formulario. Este obxecto ten propiedades correspondentes aos atributos HTML `action` e `method`.

Métodos como `submit()` e `reset()` úsanse para enviar e restablecer formularios.

```js
const form = document.getElementById('signup');
form.action; // devolve o atributo acción - action attribute
form.method; // devolve o atributo método - method attribute
form.submit(); // envía o formulario - submit
```

JavaScript proporciona xestores de eventos para engadir interactividade aos formularios HTML. Aproveitando estes eventos, podes executar scripts personalizados en resposta ás accións do usuario dentro do formulario:

**Evento de envío - submit**: Un formulario normalmente ten un botón de envío que, ao premelo, envía os datos do formulario ao servidor. Isto conséguese mediante un elemento `<input>` ou un elemento `<button>` co atributo `type="submit"`:

```html
<input type="submit" value="Sign Up">
// ou
<button type="submit">Sign Up</button>
```

Para anexar un detector de eventos ao evento submit, utilízase o método `addEventListener()`. Velaquí un exemplo:

```javascript
const form = document.getElementById('signup');
form.addEventListener('submit', (event) => {
    // Lóxica de validación e envío personalizada aquí
});
```

En moitos casos, pode que queiras interceptar o comportamento predeterminado de envío de formularios e executar lóxica personalizada antes de permitir que o formulario se envíe ao servidor. Para isto podes usar `preventDefault()`. Exemplo:

```javascript
const form = document.getElementById('signup');
form.addEventListener('submit', (event) => {
    event.preventDefault(); // Impide o envío predeterminado do formulario
    // Lóxica de validación e envío personalizada aquí
});
```

Sen `event.preventDefault()`, calquera lóxica de validación e envío personalizada seguiría executándose dentro do detector de eventos, pero non se impediría o comportamento predeterminado de envío de formularios.

**Evento de restablecemento** : O `reset`evento actívase cando o formulario se restablece mediante un botón de restablecemento ou mediante programación. Usamos `reset()`o método para borrar todos os campos do formulario e restablecelos aos seus valores predeterminados.

```javascript
document.querySelector('form').addEventListener('reset', function(event) {
    // Lóxica de validación e envío personalizada aquí
});
```

### Como acceder aos campos do formulario

Podes acceder aos campos do formulario usando métodos DOM como `getElementsByName()`, `getElementById()`, `querySelector()`, etc.

A propiedade `form.elements` almacena unha colección de elementos de formulario. Podes acceder a estes elementos por índice, ID ou nome. Aquí tes un exemplo:

```javascript
const form = document.getElementById('signup');
const nameField = form.elements['name']; // accedendo ao elemento polo nome - name
const emailField = form.elements['email']; // accedendo ao elemento polo nome - name
const firstElement = form.elements[0]; // accedendo ao primeiro elemento polo seu índice - index no.
```

Unha vez que accedas a un campo de formulario, podes usar a `value`propiedade para acceder ao seu valor. Velaquí un exemplo:

```javascript
const nameValue = nameField.value;
const emailValue = emailFieldByName.value;
```

### Validación de formularios

A validación de formularios é un aspecto esencial do desenvolvemento web que garante que os datos enviados polos usuarios sexan precisos e cumpran os criterios especificados antes de seren procesados polo servidor. As validacións habituais inclúen a comprobación de campos baleiros, formatos de correo electrónico válidos, etc.

#### Validación de formularios HTML

HTML5 proporciona validación de formularios integrada a través de varios atributos:

- **requirido - [required](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/required)**: Especifica que un campo debe ser recheo sempre.
- **patrón - [pattern](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/pattern)**: Especifica un patrón de expresión regular co que debe coincidir o valor de entrada.
- **mínimo** e **máximo** - **[min](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/min)** | **[max](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/max)**: Especifica os valores mínimo e máximo para un campo de entrada.
- **lonxitude - [maxlength](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/maxlength)** | **[minlength](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Attributes/minlength)**: Especifica a lonxitude máxima e mínima da entrada
- **tipo - [type](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/input#input_types)** : Especifica o tipo de entrada esperada (por exemplo, correo electrónico, número, data).

Aquí tes un exemplo de validación de formularios HTML usando estes atributos:

```html
<form>
  <label for="username">Username:</label>
  <input type="text" id="username" name="username" required minlength="3" maxlength="15"><br>

  <label for="email">Email:</label>
  <input type="email" id="email" name="email" required><br>

  <label for="age">Age:</label>
  <input type="number" id="age" name="age" min="18" max="99"><br>

  <input type="submit" value="Submit">
</form>
```

#### Validación de formularios JavaScript

JavaScript permite aos desenvolvedores levar a cabo unha lóxica de validación máis sofisticada que ofrece o atributo HTML. Os detectores de eventos pódense asociar a elementos de formulario para xestionar a validación dinamicamente.

Aquí tes un exemplo básico de validación de formularios en JavaScript:

```javascript
const form = document.querySelector('form');

form.addEventListener('submit', function(event) {
    event.preventDefault(); // Impedir o envío do formulario
    
    // Executar lóxica de validación personalizada
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    if (!emailIsValid(email)) {
        alert('Please enter a valid email address.');
        return;
    }

    if (password.length < 6) {
        alert('Password must be at least 6 characters long.');
        return;
    }

    // Se a validación é correcta, envía o formulario
    form.submit();
});

function emailIsValid(email) {
    return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
```

Neste exemplo, a función JavaScript `emailIsValid()` usa unha expresión regular para validar o formato do correo electrónico. O detector de eventos `submit` impide que se envíe o formulario se a validación falla e móstranselle mensaxes de erro personalizadas ao usuario.

### Vexamos un exemplo: formulario de rexistro

Agora, combinemos todos os conceptos que tratamos nun exemplo completo dun formulario de rexistro con validación no lado do cliente usando JavaScript:

```html
<!DOCTYPE html>
<html>
  <body>
    <h2>User Registration</h2>
    <form id="registrationForm">
      <div>
        <label for="username">Username:</label>
        <input type="text" id="username" name="username" />
      </div>
      <div>
        <label for="email">Email:</label>
        <input type="email" id="email" name="email" />
      </div>
      <div>
        <label for="password">Password:</label>
        <input type="password" id="password" name="password" />
      </div>
      <div>
        <input type="submit" value="Register" />
      </div>
    </form>

    <div id="errorMessages"></div>
    <script src="script.js"></script>
  </body>
</html>
```

**Estrutura HTML** : Temos un formulario de rexistro sinxelo con campos para nome de usuario, correo electrónico, contrasinal e un botón de enviar. Tamén hai un contedor div ( `errorMessages`) para mostrar as mensaxes de erro de validación.

Agora imos escribir código JavaScript para xestionar o envío de formularios e realizar a validación no lado do cliente:

```javascript
const registrationForm = document.getElementById("registrationForm");
const errorMessages = document.getElementById("errorMessages");

registrationForm.addEventListener("submit", function (event) {
  event.preventDefault();

  const { username, email, password } = registrationForm.elements;

  errorMessages.innerHTML = "";

  if (!username.value.trim()) {
    displayError("Username is required.");
    return;
  }

  if (!email.value.trim() || !isValidEmail(email.value)) {
    displayError("Please enter a valid email address.");
    return;
  }

  if (!password.value.trim() || !isStrongPassword(password.value)) {
    displayError(
      "Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, one digit, and one special character."
    );
    return;
  }

  alert("Registration successful!");
  registrationForm.reset();
});

function displayError(message) {
  errorMessages.innerHTML += `<div class="error">${message}</div>`;
}

function isValidEmail(email) {
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}

function isStrongPassword(password) {
  return /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!@#$%^&*]).{8,}$/.test(password);
}
```

**Manexo de JavaScript**: Seleccionamos o formulario e o contedor da mensaxe de erro mediante `getElementById`. Axuntamos un detector de eventos ao evento de envío do formulario. Cando se envía o formulario, evitamos o seu comportamento predeterminado mediante `event.preventDefault()` para xestionar o envío do formulario manualmente.

**Validación de formularios**: Recuperamos os valores do nome de usuario, correo electrónico e contrasinal.

**Realizamos unha validación básica**: o nome de usuario non debe estar baleiro, o correo electrónico debe ter un formato válido e o contrasinal debe ter polo menos 8 caracteres e conter polo menos unha maiúscula, unha minúscula, un díxito e un carácter especial.

**Xestión de erros**: se algunha validación falla, mostramos a mensaxe de erro correspondente. As mensaxes de erro móstranse no `errorMessages`div.

**Restablecemento do formulario**: Tras o rexistro correcto (neste caso, unha simple alerta), restablecemos o formulario usando `registrationForm.reset()`

Neste exemplo, o código usa un `alert` para indicar que o rexistro se realizou correctamente. Nun escenario real, quizais queiras implementar unha chamada AJAX para enviar os datos a un servidor para o seu procesamento e xestionar a resposta en consecuencia. Aínda que iso non é o que imos tratar aquí, como xa se mencionou ao comezo do artigo.

En xeral, este exemplo abrangue a creación de formularios, o seu manexo con JavaScript, a validación de formularios mediante expresións regulares e a visualización dinámica de mensaxes de erro personalizadas, demostrando un formulario básico de rexistro de usuarios con validación no lado do cliente.

## Botóns de radio

Os [botóns de radio](https://developer.mozilla.org/en-US/docs/Web/HTML/Reference/Elements/input/radio) son un elemento de formulario común que se usa para seleccionar unha opción dun conxunto de opcións. En JavaScript, podes manipular os botóns de radio para recuperar as seleccións do usuario e realizar accións baseadas nesas seleccións.

### Como crear botóns de radio

Podes usar botóns de radio se queres que os usuarios seleccionen só unha opción dun conxunto de opcións. En HTML, podes crear botóns de radio usando o `<input>`elemento co `type`atributo definido en "radio". Un grupo de botóns de radio co mesmo `name`atributo forma un grupo de radio.

Aquí tes un exemplo:

```html
<!DOCTYPE html>
<html>
  <body>
    <form id="languageForm">
      <p>Select your favorite programming language:</p>
      <div>
        <input type="radio" name="language" value="JavaScript" id="js" />
        <label for="js">JavaScript</label>
      </div>
      <div>
        <input type="radio" name="language" value="Python" id="python" />
        <label for="python">Python</label>
      </div>
      <div>
        <input type="radio" name="language" value="Java" id="java" />
        <label for="java">Java</label>
      </div>
      <!-- More language options can be added here -->
    </form>
  </body>
</html>
```

Empregas os atributos `id` e `for` para a accesibilidade, vinculando a etiqueta ao botón de opción correspondente.

### Como recuperar o valor do botón de opción seleccionado

Agora, imos falar de como recuperar o valor do botón de radio seleccionado usando JavaScript.

```html
    <!-- HTML -->
    <button id="btn">Show Selected Language</button>
    <p id="output"></p>

    <script>
      const btn = document.querySelector("#btn");
      const radioButtons = document.querySelectorAll('input[name="language"]');
      const output = document.getElementById("output");

      btn.addEventListener("click", () => {
        let selectedLanguage;
        for (const radioButton of radioButtons) {
          if (radioButton.checked) {
            selectedLanguage = radioButton.value;
            break;
          }
        }
        // Displaying the output:
        output.innerText = selectedLanguage
          ? `You selected ${selectedLanguage}`
          : `You haven't selected any language`;
      });
    </script>
```

Así é como funciona este código: o código JavaScript inicialízase seleccionando o botón, os botóns de opción e os elementos de saída do documento HTML. Engadimos un detector de eventos click ao elemento button. Cando se fai clic no botón, execútase a función dentro do detector de eventos.

Dentro do detector de eventos click, iteramos sobre todos os botóns de radio da `radioButtons`colección. Comprobamos se un botón de radio está marcado usando a súa `checked`propiedade. Se un botón de radio está marcado, asignamos o seu valor á `selectedLanguage`variable e saímos do bucle usando `break`.

Actualizamos o contido do elemento de saída ( `<p>`etiqueta con id `output`) segundo se seleccione un idioma. Se se selecciona un idioma ( `selectedLanguage`é verdadeiro), mostramos unha mensaxe que indica o idioma seleccionado. En caso contrario, solicitamos ao usuario que seleccione un idioma.

### Evento de cambio de botón de opción

Cando un botón de radio está marcado ou desmarcado, activa un `change`evento. Podes escoitar este evento usando `addEventListener()`. Dentro do xestor de eventos, podes acceder ao estado marcado e ao valor do botón de radio usando `this.checked`e `this.value`.

```javascript
radioButton.addEventListener('change', function (e) {
  if (this.checked) {
    console.log(this.value);
  }
});
```

### Como xerar dinámicamente botóns de radio

Agora, exploremos como xerar dinamicamente botóns de radio usando JavaScript. Isto é útil cando queres crear opcións de botóns de radio dinamicamente baseadas en certos criterios ou datos.

Supoñamos que temos unha matriz de idiomas e queremos xerar dinamicamente botóns de radio para cada opción de idioma:

```javascript
<!DOCTYPE html>
<html>
  <body>
    <div id="languages"></div>

    <script>
      const languageOptions = ["Python", "Javascript", "C++", "Java"];

      // Generate the radio buttons
      const languages = document.querySelector("#languages");
      languages.innerHTML = languageOptions.map((language) => `
          <div>
              <input type="radio" name="language" value="${language}" id="${language}">
              <label for="${language}">${language}</label>
          </div>`).join(' ');
    </script>
  </body>
</html>
```

Xera dinamicamente botóns de radio baseados na `languageOptions`matriz e insíreos no elemento contedor ( `<div id="languages"></div>`). Cada botón de radio ten un ID e un valor únicos que corresponden ao nome do idioma, e as etiquetas están asociadas aos seus respectivos botóns de radio mediante o `for`atributo.

Despois de xerar dinamicamente os botóns de radio, agora imos engadirlles `change`detectores de eventos para xestionar os cambios na selección.

```javascript
    <!-- HTML -->
    <div id="languages"></div>
    <div id="languageOutput"></div>  <!-- creamos este para obter a saída do idioma seleccionado -->

    <!-- Xerar radio buttons -->

// Adxuntar detectores de eventos de cambio - Event Listeners
const radioButtons = document.querySelectorAll('input[name="language"]');
for (const radioButton of radioButtons) {
    radioButton.addEventListener('change', showSelectedlanguage);
}        

// Xestión do evento de cambio
function showSelectedlanguage() {
    if (this.checked) {
        document.querySelector('#languageOutput').innerText = `You selected ${this.value}`;
    }
}
```

Isto é o que está a suceder:

- Seleccionamos todos os botóns de radio co atributo `name` definido en `"language"`.
- Usamos un bucle `for...of` para iterar sobre cada botón de radio e engadir un detector de eventos `change` a cada botón de radio. Este detector escoita os cambios no estado dos botóns de radio, é dicir, cando un botón de radio está seleccionado ou deseleccionado.
- Definimos unha función chamada `showSelectedLanguage` para xestionar o evento de cambio desencadeado ao seleccionar un botón de radio.
- Dentro da función `showSelectedLanguage`, primeiro comprobamos se o botón de opción actual ( `this`) está marcado usando a propiedade `checked`. Se o botón de opción está marcado, actualizamos o contido de texto dun elemento co id `languageOutput` usando `document.querySelector('#languageOutput')`. Este elemento serve como marcador de posición para mostrar o idioma seleccionado.

Esta configuración garante que os botóns de opción xerados dinamicamente teñan detectores de eventos `change` asociados, o que permite a xestión dinámica das seleccións do usuario.

## Checkboxes - Caixas de verificación

### Como crear unha caixa de verificación HTML

Primeiro creemos unha caixa de verificación usando o `<input>`elemento e o atributo de tipo definidos como "checkbox". Asociémola coa etiqueta para unha mellor accesibilidade.

```html
<label for="agree">
   <input type="checkbox" id="agree" name="agree" value="yes"> I agree to the terms
</label>
```

### Como comprobar se unha caixa de verificación está marcada

Unha caixa de verificación en HTML pode existir en dous estados: marcada e desmarcada. E podemos determinar cal está activa usando `checked`a propiedade . Se está `true`, a caixa de verificación está marcada; se non, está desmarcada. Exemplo:

```html
<!DOCTYPE html>
<html>
<body>
    <label for="agree">
        <input type="checkbox" id="agree" name="agree"> I agree to the terms
    </label>

    <script>
        const checkbox = document.getElementById('agree');
        console.log(checkbox.checked);
    </script>
</body>
</html>
```

### Como obter os valores das caixas de verificación

Nos formularios HTML, cando se marca unha caixa de verificación e se envía o formulario, o navegador inclúe a caixa de verificación nos datos do formulario co seu atributo `name` como clave e o atributo `value` (se se especifica) como valor. Pero se a caixa de verificación non está marcada, non se inclúe nos datos do formulario.

```html
<label for="agree">
    <input type="checkbox" id="agree" name="agree"> I agree to the terms
</label>

<button id="btn">Show Value</button>
<script>
    const checkbox = document.querySelector('#agree');
    const btn = document.querySelector('#btn');
    btn.onclick = () => {
       alert(checkbox.value);
    };
</script>
```

Entón, basicamente, a cuestión é a seguinte: cando se marca unha caixa de verificación e se inclúe nos envíos de formularios, o navegador define por defecto o envío `'on'` como valor se non se define explicitamente ningún atributo `value` para o elemento checkbox. Para xestionar con precisión o estado marcado dunha caixa de verificación mediante JavaScript, usámola propiedade `checked` en lugar de confiar unicamente no atributo `value`.

### Como xestionar varias caixas de verificación

Ás veces, pode ser necesario traballar con varias caixas de verificación co mesmo nome e querer recuperar os valores das caixas de verificación seleccionadas. Velaquí un exemplo:

```html
<!DOCTYPE html>
<html>
  <body>
    <p>Select your preferred languages:</p>
    <label for="l1">
      <input type="checkbox" name="language" value="C++" id="l1" />C++
    </label>
    <label for="l2">
      <input type="checkbox" name="language" value="Python" id="l2" />Python
    </label>
    <label for="l3">
      <input type="checkbox" name="language" value="Java" id="l3" />Java
    </label>
    <p>
      <button id="btn">Get Selected Languages</button>
    </p>

    <script>
      const btn = document.querySelector("#btn");
      btn.addEventListener("click", () => {
        const checkboxes = document.querySelectorAll(
          'input[name="language"]:checked'
        );
        const selectedLanguages = Array.from(checkboxes).map(
          (checkbox) => checkbox.value
        );
        alert("Selected Languages: " + selectedLanguages.join(", "));
      });
    </script>
  </body>
</html>
```

Neste exemplo, temos caixas de verificación para seleccionar as linguaxes de programación preferidas.

- Ao premer o botón, actívase un detector de eventos. Dentro do detector de eventos, seleccionamos todas as caixas de verificación co atributo de nome "language" que estean marcadas.
- Despois convertemos a NodeList devolta por `querySelectorAll()` nunha matriz usando `Array.from()`.
- Finalmente, mapeamos a matriz para recuperar os valores das caixas de verificación seleccionadas e mostralos usando `alert()`.

### Como marcar/desmarcar todas as caixas de verificación

Agora, imos crear unha funcionalidade para marcar ou desmarcar todas as caixas de verificación á vez:

```html
<!DOCTYPE html>
<html>
  <body>
    <p>
      <button id="btn">Check / Uncheck All</button>
    </p>
    <p>Select your preferred languages:</p>
    <label for="l1">
      <input type="checkbox" name="language" value="C++" id="l1" />C++
    </label>
    <label for="l2">
      <input type="checkbox" name="language" value="Python" id="l2" />Python
    </label>
    <label for="l3">
      <input type="checkbox" name="language" value="Java" id="l3" />Java
    </label>
    <script src="script.js"></script>
  </body>
</html>
```

Código Javascript:

```javascript
// función para marcar ou desmarcar todas as casillas de verificación
function check(checked = true) {
  const checkboxes = document.querySelectorAll('input[name="language"]');

  // Iterar por cada caixa de verificación
  checkboxes.forEach((checkbox) => {
    // Define a propiedade marcada de cada caixa de verificación co valor do parámetro "marcado"
    checkbox.checked = checked;
  });
}

// función para marcar todas as caixas de verificación e cambiar o comportamento do botón para desmarcar todas
function checkAll() {
  check();
  this.onclick = uncheckAll;
}

// función para desmarcar todas as caixas de verificación e cambiar o comportamento do botón para marcalas todas
function uncheckAll() {
  check(false);
  this.onclick = checkAll;
}

const btn = document.querySelector("#btn");

btn.onclick = checkAll;
```

Neste exemplo, temos un botón etiquetado como "Marcar/Desmarcar todo".

- Cando se fai clic no botón por primeira vez, o obxectivo é marcar todas as caixas de verificación. Polo tanto, a función `checkAll` está asignada para xestionar esta acción ( `const btn = document.querySelector("#btn");`).
- Se se volve premer o botón, desmarca todas as caixas de verificación. Definimos as funcións `check()`, `checkAll()`, e `uncheckAll()` para xestionar a marcación e desmarcación das caixas de verificación.
- Inicialmente, asignámolo `checkAll()` ao evento do botón `onclick` e, a seguir, cambiamos entre `checkAll()` e `uncheckAll()` segundo o estado actual das caixas de verificación.

Unha estratexia alternativa podería ser:

```javascript
function checkAll(checked = true) {
  const checkboxes = document.querySelectorAll('input[name="language"]');
  checkboxes.forEach((checkbox) => {
    checkbox.checked = checked;
  });
}

const btn = document.querySelector("#btn");

btn.addEventListener("click", () => {
  // Atopa a primeira caixa de verificación co atributo name definido en 'language'
  const firstCheckbox = document.querySelector('input[name="language"]');
  // Comproba se a primeira caixa de verificación está marcada
  const isChecked = firstCheckbox.checked;
  // Chamar á función checkAll co estado oposto da primeira caixa de verificación
  checkAll(!isChecked);
});
```

Aquí, seleccionamos a primeira caixa de verificación co nome "idioma" para determinar o seu estado actual de verificación. Despois, chamamos `checkAll()` co estado oposto.

### Como xerar dinamicamente caixas de verificación

```html
<!DOCTYPE html>
<html>
  <body>
    <div id="languages"></div>

    <script>
      const languageOptions = ["Python", "Javascript", "C++", "Java"];

      // Xerar checkboxes
      const html = languageOptions
        .map(
          (language) => `<label for="language-${language}">
                <input type="checkbox" name="language" id="language-${language}" value="${language}"> ${language}
            </label>`
        )
        .join(" ");
      document.querySelector("#languages").innerHTML = html;
    </script>
  </body>
</html>
```

Así é como funciona:

- Definimos unha matriz `languageOptions` que contén nomes de linguaxes.
- Usamos o método `map()` para iterar a través da matriz `languageOptions` e xerar unha matriz de cadeas HTML para cada linguaxe.
- Cada cadea HTML comprende un elemento `label` asociado a unha caixa de verificación `input`. A caixa de verificación `input` inclúe atributos axeitados como `type`, `name`, `id` e `value`, derivados dinamicamente do nome do idioma.
- Unimos a matriz de cadeas HTML nunha soa cadea usando `join(' ')`.
- Finalmente, definimos a propiedade `innerHTML` do elemento raíz `<div>` co id `languages` na cadea HTML xerada, renderizando así as caixas de verificación para cada linguaxe de programación.

## Seleccionar elemento:

O elemento `<select>` en HTML proporciona unha lista despregable de opcións para que os usuarios escollan. Permite seleccións únicas ou múltiples. Exemplo:

```html
<select id="cities">
    <option value="JAI">Jaipur</option>
    <option value="DEL">New Delhi</option>
    <option value="UDR">Udaipur</option>
    <option value="MUM">Mumbai</option>
</select>
```

Por defecto, un elemento `<select>` permite unha única selección. Para activar varias seleccións, engade o atributo `multiple`.

```html
<select id="cities" multiple>
```

Agora os usuarios poden seleccionar varias froitas mantendo premida a tecla Ctrl (ou Cmd en Mac) mentres fan clic.

### Como interactuar cun elemento seleccionado:

Para interactuar cun elemento `<select>` usando JavaScript, empregamos o tipo `HTMLSelectElement`, que proporciona propiedades útiles como `selectedIndex` e `value`. Exemplo:

```html
<script>
const selectElement = document.getElementById('cities');
console.log(selectElement.selectedIndex); // Devolve o índice da opción seleccionada
console.log(selectElement.value); // Devolve o valor da opción seleccionada
console.log(selectElement.multiple); // Devolve verdadeiro - true - se se permiten varias seleccións
</script>
```

JavaScript permíteche xestionar eventos no elemento `<select>`, como cando un usuario selecciona unha opción. Exemplo:

```html
<button id="btn">Get Selected City</button>

    <script>
      const btn = document.querySelector("#btn");
      const selectElement = document.getElementById("cities");
      btn.onclick = (event) => {
        event.preventDefault();
        const selectedCity =
          selectElement.options[selectElement.selectedIndex].text;
        alert(`Selected city: ${selectedCity}, 
        Index: ${selectElement.selectedIndex}`);
      };
    </script>
```

**Usando a propiedade `value`:** A propiedade `value` representa o valor da opción seleccionada. Entendémolo cun exemplo:

```html
<select id="cities">
    <option value="">Jaipur</option> 
    <option value="DEL">New Delhi</option>
    <option value="UDR">Udaipur</option>
    <option>Mumbai</option>
</select>
```
```js
const btn = document.querySelector("#btn");
const selectElement = document.querySelector("#cities");

btn.onclick = (event) => {
    event.preventDefault();
    alert(selectElement.value);
};
```

- Se se selecciona "Jaipur", isto significa que temos unha cadea baleira xa que o atributo value está baleiro no noso HTML.
- Se unha opción carece dun atributo de valor, a propiedade de valor da caixa de selección convértese no texto da opción seleccionada. Exemplo: se se selecciona "Mumbai", a propiedade de valor é "Mumbai".
- Se se seleccionan varias opcións, a propiedade `value` da caixa de selección derívase da primeira opción seleccionada segundo as regras anteriores.

### Como acceder ás opcións con JavaScript

O `HTMLOptionElement`tipo representa `<option>`elementos individuais dentro dun elemento  `<select>`en JavaScript. Proporciona propiedades como `index`, `selected`, `text` e `value` para acceder a información sobre cada opción.

```javascript
const selectElement = document.getElementById('cities');
const secondOptionText = selectElement.options[1].text; // Accedendo ao texto da segunda opción
const secondOptionValue = selectElement.options[1].value; // Accedendo ao valor da segunda opción
```

### Como xestionar seleccións múltiples:

Cando un elemento `<select>` permite varias seleccións, podes iterar polas súas opcións para atopar cales están seleccionadas e recuperar os seus valores de texto.

```javascript
const selectElement = document.getElementById('cities');
const selectedOptions = Array.from(selectElement.options).filter(option => option.selected);
const selectedValues = selectedOptions.map(option => option.text);
```

A saída será unha matriz que contén texto das opcións seleccionadas. Podemos usar `option.value` para obter unha matriz de valores no seu lugar. Exemplo:

```html
<!DOCTYPE html>
<html>
  <body>
    <select id="cities" multiple>
      <option value="JAI">Jaipur</option>
      <option value="DEL">New Delhi</option>
      <option value="UDR">Udaipur</option>
      <option value="MUM">Mumbai</option>
    </select>

    <button id="btn">Get Selected Cities</button>
    <script>
      const btn = document.querySelector("#btn");
      const selectElement = document.querySelector("#cities");

      btn.onclick = (event) => {
        event.preventDefault();
        const selectedOptions = Array.from(selectElement.options)
          .filter((option) => option.selected)
          .map((option) => option.text);
        alert("Selected City: " + selectedOptions.join(", "));
      };
    </script>
  </body>
</html>
```

- Ao premer o botón, o script recompila as opcións seleccionadas filtrándoas segundo a propiedade `selected`. Despois, mapea as opcións seleccionadas para recuperar o seu contido de texto.
- Finalmente, mostra os idiomas seleccionados nunha mensaxe de alerta.

### Vexamos un exemplo: Xestor de tarefas (Engadir e eliminar tarefas)

```html
<!DOCTYPE html>
<html>
  <style>
    #container {
      max-width: 540px;
      margin: 50px auto;
    }

    form {
      display: flex;
      flex-direction: column;
    }
  </style>
  <body>
    <div id="container">
      <form>
        <label for="task">Task:</label>
        <input
          type="text"
          id="task"
          placeholder="Enter a task"
          autocomplete="off"
        />

        <button id="btnAdd">Add Task</button>

        <label for="taskList">Task List:</label>
        <select id="taskList" name="taskList" multiple></select>

        <button id="btnRemove">Remove Selected Tasks</button>
      </form>
    </div>
    <script src="script.js"></script>
  </body>
</html>
```

Esta estrutura HTML inclúe campos de entrada para introducir descricións de tarefas, botóns para engadir e eliminar tarefas e un elemento  `<select>` para mostrar a lista de tarefas. Engadimos un pouco de CSS para maior claridade. Vexamos agora o código Javascript:

```javascript
const btnAdd = document.querySelector('#btnAdd');
const btnRemove = document.querySelector('#btnRemove');
const taskList = document.querySelector('#taskList');
const taskInput = document.querySelector('#task');

btnAdd.onclick = (e) => {
    e.preventDefault();

    // Validar a entrada da tarefa
    if (taskInput.value.trim() === '') {
        alert('Please enter a task description.');
        return;
    }

    // Crear unha nova opción de tarefa
    const option = new Option(taskInput.value, taskInput.value);
    taskList.add(option, undefined);

    // Restablecer a entrada da tarefa
    taskInput.value = '';
    taskInput.focus();
};

btnRemove.onclick = (e) => {
    e.preventDefault();

    // Gardar as tarefas seleccionadas
    let selectedTasks = [];

    for (let i = 0; i < taskList.options.length; i++) {
        selectedTasks[i] = taskList.options[i].selected;
    }

    // Eliminar tarefas seleccionadas
    let index = taskList.options.length;
    while (index--) {
        if (selectedTasks[index]) {
            taskList.remove(index);
        }
    }
};
```

Explicación: seleccionamos os elementos necesarios do HTML e asociamos detectores de eventos aos botóns "Engadir tarefa" e "Eliminar tarefas seleccionadas". Ao premer o botón "Engadir tarefa", creamos unha nova opción de tarefa baseada no valor do campo de entrada e engadímola ao `<select>`elemento. Ao premer o botón "Eliminar tarefas seleccionadas", eliminamos as tarefas seleccionadas do `<select>`elemento.

## Diferenza entre cambio e evento de entrada

O evento de entrada en JavaScript actívase sempre que cambia o valor dunha entrada dos elementos `<select>` ou `<textarea>`. A diferenza do evento de cambio, que agarda a que se confirme un valor (por exemplo, cando unha entrada perde o foco), o evento de entrada actívase continuamente a medida que o valor cambia. O evento de entrada basicamente proporciona unha forma de responder á entrada do usuario en tempo real. Exemplo:

```html
<!DOCTYPE html>
<html>
<body>
    <label for="userInput">Enter Your Name:</label>
    <input type="text" id="userInput" placeholder="Your name">
    <p>Your name is: <span id="displayName"></span></p>
</body>
</html>
<script>
    const userInput = document.getElementById('userInput');
    const Name = document.getElementById('displayName');

    userInput.addEventListener('input', function() {
        Name.textContent = userInput.value || 'Guest!';
    });
</script>
```

- Este código JavaScript selecciona o campo de entrada co ID `"userInput"` e o elemento span co ID `"displayName"`.
- Un detector de eventos está asociado ao evento de entrada do campo `userInput`.
- Cando se activa o evento de entrada (por exemplo, ao escribir no campo de entrada), o detector de eventos actualiza `displayName` dinamicamente o contido de texto do intervalo para reflectir o nome introducido ou mostra "Anónimo" se o campo de entrada está baleiro.
- Agora, se cambias 'input' por 'change' aquí `userInput.addEventListener('input', function()`así: `userInput.addEventListener('change', function()`, o detector de eventos só se activará cando o campo de entrada perda o foco despois de introducir un valor (en oposición a cambialo valor continuamente en tempo real).

## Conclusión

Ao comprender os fundamentos dos elementos, atributos e eventos dos formularios HTML, podes crear formularios web dinámicos e fáciles de usar que melloren a experiencia do usuario.

JavaScript xoga un papel crucial na xestión do envío de formularios, na validación da entrada do usuario e na subministración de comentarios en tempo real aos usuarios.

A través de exemplos prácticos e explicacións detalladas, nesta guía aprendiches a traballar con botóns de opción, caixas de verificación, elementos de selección e a xestionar varias seleccións.

Continúa explorando e experimentando cos conceptos presentados aquí para crear formularios robustos e intuitivos para as túas aplicacións web.

---

ref: Artigo de [Samyak Jain](https://www.freecodecamp.org/news/author/samyakjainblog/) para [www.freecodecamp.org/news]( https://www.freecodecamp.org/news/form-validation-in-javascript/)

Saber máis:

-  [Manual de DOM e eventos](https://www.freecodecamp.org/news/javascript-in-the-browser-dom-and-events/) 